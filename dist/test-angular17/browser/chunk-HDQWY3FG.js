import{a as N,b as I,c as J}from"./chunk-DNPYFPXP.js";import{a as Z,b as w,c as s,d as F,e as S,f as y,g as E,h as k,i as V,k as R}from"./chunk-QRWWJGCH.js";import{a as K}from"./chunk-NGHC5C4C.js";import{a as O}from"./chunk-KONVMFNH.js";import{d as H,e as M,f as P,g as B,o as W,p as Q}from"./chunk-SDMUVFW5.js";import{$a as r,Ba as X,Fa as m,La as v,Q as q,Ra as h,Va as g,W as c,Wa as u,Y as C,_a as e,aa as z,ab as d,ba as D,bb as L,db as _,eb as G,gb as a,nb as x,ob as $}from"./chunk-CUD5NDY5.js";var te="http://localhost:3000/login",ne="http://localhost:3000/600/users/",ie="http://localhost:3000/register",A=(()=>{let t=class t{constructor(){this.http=c(B)}login(i){return this.http.post(te,i)}loginAuthorize(i){return this.http.get(ne+i)}registerAuthorize(i){return this.http.post(ie,i)}};t.\u0275fac=function(l){return new(l||t)},t.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function re(n,t){n&1&&(e(0,"span",18),a(1,"Inserisci un Username valido"),r())}function ae(n,t){n&1&&(e(0,"span",18),a(1,"Inserisci una mail valida"),r())}function le(n,t){n&1&&(e(0,"span",18),a(1," Inserisci una password valida "),d(2,"br"),a(3," [Min 8 Caratteri, 1 Maiusc, 1 carattere speciale] "),r())}function se(n,t){n&1&&(e(0,"span",18),a(1,"Le password non combaciano"),r())}var me=n=>({color:n}),Y=(()=>{let t=class t{constructor(){this.isModaleVisible=new v,this.fb=c(V),this.authService=c(A),this.alertService=c(O),this.registerForm=this.fb.nonNullable.group({username:["",[s.required,s.minLength(5),s.pattern(J)]],email:["",[s.required,s.email,s.pattern(I)]],password:["",[s.required,s.pattern(N)]],repeatPassword:["",s.required],privacy:[!1,s.required]},{validators:[this.passwordsMatchValidator]})}register(){let i={username:this.registerForm.get("username").value,email:this.registerForm.get("email").value,password:this.registerForm.get("password").value};this.authService.registerAuthorize(i).subscribe({next:()=>{this.alertService.showAlert("success","Registrazione effettuata con successo!")},error:l=>{this.alertService.showAlert("error",`${l.error} | ${l.status} - ${l.statusText}`)}})}modalVisible(i){this.isModaleVisible.emit(i)}passwordsMatchValidator(i){let l=i.get("password"),o=i.get("repeatPassword");return l.value!==""&&o.value!==""&&l&&o&&l.value!==o.value?{passwordsMismatch:!0}:null}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=C({type:t,selectors:[["app-register"]],outputs:{isModaleVisible:"isModaleVisible"},standalone:!0,features:[x],decls:37,vars:9,consts:[["id","register-modale"],["ngSrc","./../../assets/logo-tipo3.png","alt","logo","height","162","width","433","priority","auto"],["id","registerForm",3,"formGroup","ngSubmit"],["for","username"],["type","text","name","username","formControlName","username","placeholder","Inserisci un Username"],["class","error-input"],["for","email"],["type","text","name","email","formControlName","email","placeholder","Inserisci la tua mail"],["for","password"],["type","password","name","password","formControlName","password","placeholder","Inserisci la tua password","autocomplete","off"],["for","repeatPassword"],["type","password","name","repeatPassword","formControlName","repeatPassword","placeholder","Ripeti la tua password","autocomplete","off"],["type","checkbox","name","privacy","formControlName","privacy"],["for","privacy","name","privacy",3,"ngStyle"],["type","submit",3,"disabled"],[3,"click"],[1,"x"],["routerLink","/home"],[1,"error-input"]],template:function(l,o){if(l&1&&(e(0,"div",0),d(1,"img",1),e(2,"form",2),_("ngSubmit",function(){return o.register()}),e(3,"h1"),a(4,"Registrati"),r(),e(5,"label",3),a(6,"Username:"),r(),d(7,"input",4),g(8,re,2,0,"span",5),e(9,"label",6),a(10,"Email:"),r(),d(11,"input",7),g(12,ae,2,0,"span",5),e(13,"label",8),a(14,"Password:"),r(),d(15,"input",9),g(16,le,4,0,"span",5),e(17,"label",10),a(18,"Ripeti password:"),r(),d(19,"input",11),g(20,se,2,0,"span",5),e(21,"div"),d(22,"input",12),e(23,"label",13),a(24," Ho letto "),e(25,"b"),a(26,"l'informativa"),r(),a(27," sulla privacy e accetto le condizioni "),r()(),e(28,"button",14),a(29," Registrati "),r(),e(30,"p"),a(31,"Sei gi\xE0 registrato? "),e(32,"a",15),_("click",function(){return o.modalVisible(!0)}),a(33,"Fai il Login!"),r()(),e(34,"span",16)(35,"a",17),a(36,"X"),r()()()()),l&2){let p,f,b,j;m(2),h("formGroup",o.registerForm),m(6),u(8,(p=o.registerForm.get("username"))!=null&&p.invalid&&((p=o.registerForm.get("username"))!=null&&p.touched)?8:-1),m(4),u(12,(f=o.registerForm.get("email"))!=null&&f.invalid&&((f=o.registerForm.get("email"))!=null&&f.touched)?12:-1),m(4),u(16,(b=o.registerForm.get("password"))!=null&&b.invalid&&((b=o.registerForm.get("password"))!=null&&b.touched)?16:-1),m(4),u(20,o.registerForm.hasError("passwordsMismatch")?20:-1),m(3),h("ngStyle",$(7,me,(j=o.registerForm.get("privacy"))!=null&&j.invalid?"red":"black")),m(5),h("disabled",!o.registerForm.valid)}},dependencies:[M,H,R,y,w,Z,F,S,E,k,P],styles:["#register-modale[_ngcontent-%COMP%]{position:fixed;z-index:10;display:flex;min-width:100%;height:100vh;background:radial-gradient(var(--redlight) 45%,var(--reddark) 60%) fixed;z-index:2;top:0;left:0;justify-content:center;align-items:center}#register-modale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-right:40px}#registerForm[_ngcontent-%COMP%]{background:white;position:relative;color:var(--reddark);width:47vh;min-height:50vh;border-radius:5px;box-shadow:#0f0c0c 0 10px 20px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px 0}#registerForm[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000;font-size:2em;width:100%;text-align:center;border-bottom:2px solid var(--reddark);padding:0 20px 20px;margin:0}#registerForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{align-self:center;width:90%}#registerForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-of-type:not([for=remember-psw]){margin-top:20px}#registerForm[_ngcontent-%COMP%]   label[name=privacy][_ngcontent-%COMP%]{margin-top:0}#registerForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   [for=registerPassword][_ngcontent-%COMP%]{position:relative}#registerForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;position:relative;min-height:40px;padding:10px;margin:0 15px 15px;outline:none;border:none;background-color:#fff;border-bottom:2px solid var(--reddark)}#registerForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{font-size:1.03em}#registerForm[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:17px;padding:0;margin:0 5px 0 0}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;position:relative;margin:-15px 0 0;outline:none;border:none;padding:0;align-items:center;max-height:200px}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{align-self:center;width:90%}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-of-type:not([for=remember-psw]){margin-top:20px}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   label[name=privacy][_ngcontent-%COMP%]{margin-top:0}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   [for=registerPassword][_ngcontent-%COMP%]{position:relative}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;position:relative;min-height:40px;padding:10px;margin:0 15px 15px;outline:none;border:none;background-color:#fff;border-bottom:2px solid var(--reddark)}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{font-size:1.03em}#registerForm[_ngcontent-%COMP%]   .group-input[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:17px;padding:0;margin:0 5px 0 0}#registerForm[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;position:relative;width:90%;margin:0 0 10px;padding:0;align-items:center;max-height:30px}#registerForm[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:-2px}#registerForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px;font-weight:700;margin:15px;width:90%;color:#fff;border-radius:5px;border:0;background:linear-gradient(var(--reddark),var(--redlight))}#registerForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(#684141,#612a2a)}#registerForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;background:black}#registerForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}#registerForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700}.x[_ngcontent-%COMP%]{position:absolute;z-index:4;width:30px;height:30px;top:-10px;right:-15px;font-size:1.1em;text-align:center;color:#fff;background-color:var(--reddark);border:2px solid white;border-radius:50%;cursor:pointer}.x[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width: 1000px){#register-modale[_ngcontent-%COMP%]{flex-direction:column}#register-modale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:20px}}"],changeDetection:0});let n=t;return n})();function pe(n,t){n&1&&(e(0,"span",14),a(1,"Inserisci una mail valida"),r())}function de(n,t){n&1&&(e(0,"span",14),a(1,"Inserisci una password valida"),r())}var ee=(()=>{let t=class t{constructor(){this.isModaleVisible=new v,this.router=c(W),this.fb=c(V),this.authService=c(A),this.userService=c(K),this.alertService=c(O),this.loginForm=this.fb.nonNullable.group({email:["",[s.required,s.email,s.pattern(I)]],password:["",[s.required,s.pattern(N)]]})}login(){this.authService.login(this.loginForm.value).subscribe({next:i=>{this.alertService.showAlert("success","Accesso effettuato con successo!"),this.userService.saveUserData(i),this.router.navigate(["/home"])},error:i=>{this.alertService.showAlert("error",`${i.error} | ${i.status} - ${i.statusText}`)}})}modalVisible(i){this.isModaleVisible.emit(i)}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=C({type:t,selectors:[["app-login-user"]],outputs:{isModaleVisible:"isModaleVisible"},standalone:!0,features:[x],decls:26,vars:4,consts:[["id","login-modale"],["ngSrc","./../../assets/logo-tipo3.png","alt","logo","height","162","width","433","priority","auto"],["id","loginForm",3,"formGroup","ngSubmit"],["for","email"],["type","text","name","email","formControlName","email","placeholder","Inserisci la tua mail"],["class","error-input"],["for","password"],["type","password","name","password","formControlName","password","placeholder","Inserisci la tua password","autocomplete","off"],["type","checkbox","name","remember-psw"],["for","remember-psw"],["type","submit",3,"disabled"],[3,"click"],[1,"x"],["routerLink","/home"],[1,"error-input"]],template:function(l,o){if(l&1&&(e(0,"div",0),d(1,"img",1),e(2,"form",2),_("ngSubmit",function(){return o.login()}),e(3,"h1"),a(4,"Login"),r(),e(5,"label",3),a(6,"Email:"),r(),d(7,"input",4),g(8,pe,2,0,"span",5),e(9,"label",6),a(10,"Password:"),r(),d(11,"input",7),g(12,de,2,0,"span",5),e(13,"div"),d(14,"input",8),e(15,"label",9),a(16,"Ricorda Password"),r()(),e(17,"button",10),a(18,"ACCEDI"),r(),e(19,"p"),a(20,"Non sei Registrato? "),e(21,"a",11),_("click",function(){return o.modalVisible(!1)}),a(22,"Clicca Qui!"),r()(),e(23,"span",12)(24,"a",13),a(25,"X"),r()()()()),l&2){let p,f;m(2),h("formGroup",o.loginForm),m(6),u(8,(p=o.loginForm.get("email"))!=null&&p.invalid&&((p=o.loginForm.get("email"))!=null&&p.touched)?8:-1),m(4),u(12,(f=o.loginForm.get("password"))!=null&&f.invalid&&((f=o.loginForm.get("password"))!=null&&f.touched)?12:-1),m(5),h("disabled",!o.loginForm.valid)}},dependencies:[M,R,y,w,F,S,E,k,Q,P],styles:["#login-modale[_ngcontent-%COMP%]{position:fixed;z-index:10;display:flex;min-width:100%;height:100vh;background:radial-gradient(var(--redlight) 45%,var(--reddark) 60%) fixed;z-index:2;top:0;left:0;justify-content:center;align-items:center}#login-modale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-right:40px}#loginForm[_ngcontent-%COMP%]{background:white;position:relative;color:var(--reddark);width:47vh;min-height:50vh;border-radius:5px;box-shadow:#0f0c0c 0 10px 20px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px 0}#loginForm[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000;font-size:2em;width:100%;text-align:center;border-bottom:2px solid var(--reddark);padding:0 20px 20px;margin:0}#loginForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{align-self:center;width:90%}#loginForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-of-type:not([for=remember-psw]){margin-top:20px}#loginForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   [for=loginPassword][_ngcontent-%COMP%]{position:relative}#loginForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;position:relative;min-height:40px;padding:10px;margin:0 15px 15px;outline:none;border:none;background-color:#fff;border-bottom:2px solid var(--reddark)}#loginForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{font-size:1.03em}#loginForm[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:17px;padding:0;margin:0 5px 0 0}#loginForm[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;width:90%;margin:-10px 0 10px;padding:0;align-items:center;max-height:30px}#loginForm[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:-2px}#loginForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px;font-weight:700;margin:15px;width:90%;color:#fff;border-radius:5px;border:0;background:linear-gradient(var(--reddark),var(--redlight))}#loginForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(#684141,#612a2a)}#loginForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;background:black}#loginForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}#loginForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700}.x[_ngcontent-%COMP%]{position:absolute;z-index:4;width:30px;height:30px;top:-10px;right:-15px;font-size:1.1em;text-align:center;color:#fff;background-color:var(--reddark);border:2px solid white;border-radius:50%;cursor:pointer}.x[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width: 1000px){#login-modale[_ngcontent-%COMP%]{flex-direction:column}#login-modale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:20px}}"],changeDetection:0});let n=t;return n})();function ce(n,t){if(n&1){let T=L();e(0,"app-login-user",0),_("isModaleVisible",function(l){z(T);let o=G();return D(o.isModalVisible(l))}),r()}}function ge(n,t){if(n&1){let T=L();e(0,"app-register",0),_("isModaleVisible",function(l){z(T);let o=G();return D(o.isModalVisible(l))}),r()}}var Be=(()=>{let t=class t{constructor(){this.isModaleVisible=X(!0)}isModalVisible(i){this.isModaleVisible.set(i)}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=C({type:t,selectors:[["app-login"]],standalone:!0,features:[x],decls:3,vars:1,consts:[[3,"isModaleVisible"]],template:function(l,o){l&1&&(e(0,"section"),g(1,ce,1,0,"app-login-user")(2,ge,1,0),r()),l&2&&(m(1),u(1,o.isModaleVisible()?1:2))},dependencies:[M,Y,ee],changeDetection:0});let n=t;return n})();export{Be as LoginComponent};
