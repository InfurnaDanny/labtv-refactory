import{a as z}from"./chunk-VJHWZOZM.js";import{a as N}from"./chunk-KD463WB7.js";import{a as G}from"./chunk-KONVMFNH.js";import{d as V,e as U,m as R}from"./chunk-SDMUVFW5.js";import{$a as i,Ba as b,Fa as l,Ra as h,Va as O,W as f,Wa as P,Y as T,_a as n,aa as S,ab as d,ba as F,bb as I,db as v,eb as y,gb as e,hb as C,ib as s,jb as q,nb as A,ob as E,wa as M}from"./chunk-CUD5NDY5.js";function j(r,c){if(r&1){let m=I();n(0,"button",8),v("click",function(o){S(m);let t=y();return F(t.refundFilm(o))}),e(1," RESTITUISCI "),i()}}function B(r,c){if(r&1){let m=I();n(0,"button",5),v("click",function(){S(m);let o=y();return F(o.buyMovie())}),e(1,"COMPRA"),i()}}function H(r,c){if(r&1&&(n(0,"div",7)(1,"div")(2,"h2"),e(3),i(),n(4,"p"),e(5),i()(),n(6,"div")(7,"p")(8,"b"),e(9,"Durata:"),i(),e(10),d(11,"br"),n(12,"b"),e(13,"Anno:"),i(),e(14),d(15,"br"),n(16,"b"),e(17,"Certificato:"),i(),e(18),d(19,"br"),i()(),n(20,"div")(21,"p")(22,"b"),e(23,"Score:"),i(),e(24),d(25,"br"),n(26,"b"),e(27,"Media score:"),i(),e(28),d(29,"br"),n(30,"b"),e(31,"Rating et\xE0:"),i(),e(32),i()()()),r&2){let m=y(),a,o,t,p,_,g,x,u;l(3),C((a=m.myFilm())==null?null:a.title),l(2),C((o=m.myFilm())==null?null:o.description),l(5),s(" ",(t=m.myFilm())==null?null:t.runtime,"m "),l(4),s(" ",(p=m.myFilm())==null?null:p.year," "),l(4),s(" ",(_=m.myFilm())==null?null:_.certification,"m "),l(6),s(" ",(g=m.myFilm())==null?null:g.score," "),l(4),s(" ",(x=m.myFilm())==null?null:x.score_average," "),l(4),s(" ",(u=m.myFilm())==null?null:u.age_rating," ")}}function J(r,c){r&1&&d(0,"div",7)}var L=r=>({"border-bottom":r}),le=(()=>{let c=class c{constructor(){this.movieService=f(z),this.aquiredService=f(N),this.route=f(R),this.alertService=f(G),this.filmID=b(this.route.snapshot.params.idFilm),this.myFilm=b(void 0),this.tabIsVisible=b(!0),this.aquired=b(!1),this.getMovieDetail(this.filmID()),this.aquiredService.getFilmAquired(localStorage.getItem("idUser")).subscribe(a=>{a.some(t=>t.title===this.myFilm()?.title)&&this.aquired.set(!0)})}getMovieDetail(a){this.movieService.getMovieDetail(a).subscribe(o=>this.myFilm.set(o))}buyMovie(){let a={idFilm:this.myFilm()?.imdbid,title:this.myFilm()?.title},o=localStorage.getItem("idUser");this.aquiredService.addFilm(a,o).subscribe(()=>{this.alertService.showAlert("success","Film acquistato correttamente"),this.aquired.set(!0)})}refundFilm(a){a.preventDefault();let o=localStorage.getItem("idUser");confirm("Sei sicuro di voler restituire il film?")&&(this.aquiredService.deleteFilm(this.myFilm()?.imdbid,o).subscribe(()=>this.alertService.showAlert("success","Film restituito correttamente")),this.aquired.set(!1))}};c.\u0275fac=function(o){return new(o||c)},c.\u0275cmp=T({type:c,selectors:[["app-film-detail"]],standalone:!0,features:[A],decls:27,vars:17,consts:[[1,"poster"],[3,"src","alt"],[1,"box-info"],["style","background-color: var(--redlight)"],[1,"all-detail"],[3,"click"],[3,"ngStyle"],["id","detail"],[2,"background-color","var(--redlight)",3,"click"]],template:function(o,t){if(o&1&&(n(0,"section")(1,"div",0),d(2,"img",1),i(),n(3,"div",2),d(4,"img",1),n(5,"p"),e(6),i(),n(7,"p"),e(8),i(),n(9,"div")(10,"h1"),e(11),i(),n(12,"button"),e(13,"GUARDA"),i(),O(14,j,2,0,"button",3)(15,B,2,0),i(),n(16,"h4"),e(17),i()(),n(18,"ul",4)(19,"li",5),v("click",function(){return t.tabIsVisible.set(!0)}),n(20,"h2",6),e(21,"DETTAGLI"),i()(),n(22,"li",5),v("click",function(){return t.tabIsVisible.set(!1)}),n(23,"h2",6),e(24,"RECENSIONI"),i()()(),O(25,H,33,8,"div",7)(26,J,1,0),i()),o&2){let p,_,g,x,u,D,w,k;l(2),h("src",(p=t.myFilm())==null?null:p.backdrop,M)("alt",(_=t.myFilm())==null?null:_.title),l(2),h("src",(g=t.myFilm())==null?null:g.poster,M)("alt",(x=t.myFilm())==null?null:x.title),l(2),q("",(u=t.myFilm())==null?null:u.released," - Durata: ",(u=t.myFilm())==null?null:u.runtime,"m"),l(2),s("Anno: ",(D=t.myFilm())==null?null:D.year,""),l(3),C((w=t.myFilm())==null?null:w.title),l(3),P(14,t.aquired()?14:15),l(3),C((k=t.myFilm())==null?null:k.description),l(3),h("ngStyle",E(13,L,t.tabIsVisible()?"2px solid white":0)),l(3),h("ngStyle",E(15,L,t.tabIsVisible()?0:"2px solid white")),l(2),P(25,t.tabIsVisible()?25:26)}},dependencies:[U,V],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{position:relative;padding:20px 70px;box-shadow:inset 200px -400px 100px 500px #000000e6}.box-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:900px;padding-top:20px}.box-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;text-align:center;margin-bottom:20px}.box-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:-.1px;line-height:1.5}.box-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px;font-size:1.2em;width:200px;font-weight:700;color:#fff;border-radius:5px;border:1px solid white;background-color:#0009;margin-right:15px;transition:.6s}.box-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;background-color:#fff}.box-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type:before{content:"\\25ba";margin-right:10px;display:inline-block;font-size:1em;align-self:center}.box-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .box-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:15px 0}.all-detail[_ngcontent-%COMP%]{display:flex;margin:50px 0 20px;list-style-type:none;width:100%}.all-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;display:flex;flex-direction:column}.all-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:10px 0;margin-right:30px;cursor:pointer}.all-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{border-bottom:2px solid white}#detail[_ngcontent-%COMP%]{display:flex}#detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:20px 40px}#detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:2.5em;max-width:50vw}.poster[_ngcontent-%COMP%]{position:absolute;right:0%;top:0;min-width:100%;height:100%;margin:0;z-index:-2}@media only screen and (max-width: 900px){#detail[_ngcontent-%COMP%]{flex-direction:column}#detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:100%}}'],changeDetection:0});let r=c;return r})();export{le as FilmDetailComponent};
